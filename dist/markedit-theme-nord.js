"use strict";const L=require("@codemirror/state"),e=require("@lezer/highlight"),m=require("markedit-api"),O=require("@codemirror/view"),T=require("@codemirror/language"),n={selectionBackground:".cm-selectionBackground",lineGutter:".cm-lineNumbers > .cm-activeLineGutter",foldGutter:".cm-foldGutter, .cm-foldPlaceholder",visibleSpace:".cm-visibleSpace, .cm-visibleSpace::before, .cm-visibleLineBreak, .cm-visibleLineBreak::before",matchingBracket:".cm-matchingBracket",activeIndicator:".cm-md-activeIndicator",emphasisElement:".cm-md-bold:not(.tok-meta), .cm-md-italic:not(.tok-meta), .cm-md-quote:not(.cm-md-quoteMark)",accentColor:".cm-md-header:not(.tok-meta):not(.cm-md-quote), .cm-md-codeInfo",syntaxMarker:".cm-md-header.tok-meta:not(.cm-md-quote), .cm-md-codeMark, .cm-md-linkMark, .cm-md-listMark, .cm-md-quoteMark"},G=`
.cm-activeLineGutter { background: inherit !important }
.cm-searchMatch.cm-searchMatch-selected { outline: inherit !important }
${n.lineGutter} {}
${n.foldGutter} {}
${n.visibleSpace} {}
${n.matchingBracket} {}
${n.activeIndicator} {}
${n.emphasisElement} {}
${n.accentColor} {}
${n.syntaxMarker} {}
`,F=window,R=F.__extractStyleRules__??(r=>r.value?.rules),H=F.__extractHighlightSpecs__??(r=>r.value?.specs);function I(r){const o=document.createElement("style");return o.textContent=r,document.head.appendChild(o),o}function P(r){if(r===void 0)return[{},[]];const o=D(r);return[Object.fromEntries(o.flatMap(a=>{const c=R(a)?.join(`
`)??"";return Object.entries(W(c))})),o.flatMap(a=>H(a)??[])]}function j(r,o){return r.some(t=>t.tag.toString().includes(o.toString())?t.color!==void 0:!1)}function v(r,o,t){for(const[a,c]of Object.entries(r))if(a.includes(o)&&(t===void 0||!a.includes(t))){const i=c.background??c.backgroundColor;if(i!==void 0)return i}}function A(r){const o=r.match(/rgba?\((\d+), (\d+), (\d+)(?:, ([\d.]+))?\)/);if(o===null)return;const[t,a,c]=o.slice(1,4).map(Number);return`rgba(${t}, ${a}, ${c}, 0.6)`}function D(r){const o=[],t=[r];for(;t.length>0;){const a=t.pop();Array.isArray(a)?a.forEach(c=>t.push(c)):"extension"in a?t.push(a.extension):o.push(a)}return o}function W(r){const o={},t=new CSSStyleSheet;t.replaceSync(r);for(const a of t.cssRules){const{style:c,selectorText:i}=a,{background:g,backgroundColor:u}=c;o[i]={},g.length>0&&(o[i].background=g),u.length>0&&(o[i].backgroundColor=u)}return o}function V(r){r.light!==void 0&&(s().customThemes.light=r.light),r.dark!==void 0&&(s().customThemes.dark=r.dark),typeof m.MarkEdit.editorView=="object"&&S(m.MarkEdit.editorView)}const b=window,s=()=>b.__markeditTheming__,w=matchMedia("(prefers-color-scheme: dark)");typeof s()!="object"&&z();function z(){b.__markeditTheming__={styleSheet:I(G),configurator:new L.Compartment,customThemes:{},lightOriginalRules:{},darkOriginalRules:{}},m.MarkEdit.addExtension(s().configurator.of([])),m.MarkEdit.onEditorReady(o=>S(o));const r=()=>setTimeout(()=>S(m.MarkEdit.editorView),15);w.addEventListener("change",r),s().mainThemeName=b.config.theme,Object.defineProperty(b.config,"theme",{get(){return s().mainThemeName},set(o){s().mainThemeName=o,r()}})}function S(r){const o=w.matches,t=o?s().customThemes.dark:s().customThemes.light;r.dispatch({effects:s().configurator.reconfigure(t?.extension??[])});const[a,c]=P(t?.extension),i=t===void 0;s().styleSheet.disabled=i,U(r,o,i,a,c,t?.colors)}function U(r,o,t,a,c,i){const g=v(a,".cm-activeLine",".cm-activeLineGutter"),u=v(a,n.selectionBackground),k=v(a,n.matchingBracket),h=getComputedStyle(r.contentDOM).color,C=i?.visibleSpace??A(h),E=j(c,e.tags.heading),_=[[n.activeIndicator,g,"background"],[n.matchingBracket,k,"background"],[n.lineGutter,h,"color"],[n.foldGutter,C,"color"],[n.visibleSpace,C,"color"],[n.accentColor,i?.accentColor,"color"],[n.syntaxMarker,i?.syntaxMarker,"color"]],N=Array.from(document.querySelectorAll("style")),f=o?s().darkOriginalRules:s().lightOriginalRules;for(const $ of N){const p=$.sheet?.cssRules;if(p!==void 0)for(let y=0;y<p.length;++y){const l=p[y],d=l.selectorText??"";d.includes(".cm-focused")&&d.includes(n.selectionBackground)&&(f.selectionBackground??=l.cssText,t?l.cssText=f.selectionBackground:u!==void 0&&l.style.setProperty("background",u,"important")),E&&(d===".cm-md-header"||d===".cm-md-header:not(.cm-md-quote)")&&(f.markdownHeader??=l.cssText,t?l.cssText=f.markdownHeader:l.style.removeProperty("color"));for(const[q,B,M]of _)d===q&&(B===void 0?l.style.removeProperty(M):(l.style.setProperty(M,B,"important"),(d===n.matchingBracket||d===n.activeIndicator)&&l.style.setProperty("box-shadow","unset","important")));d===n.emphasisElement&&(i?.subtleEmphasis??!0?l.style.setProperty("color","inherit","important"):l.style.removeProperty("color"))}}}function x(){return x=Object.assign?Object.assign.bind():function(r){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var a in t)({}).hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},x.apply(null,arguments)}var K=r=>{var{theme:o,settings:t={},styles:a=[]}=r,c={".cm-gutters":{}},i={};t.background&&(i.backgroundColor=t.background),t.backgroundImage&&(i.backgroundImage=t.backgroundImage),t.foreground&&(i.color=t.foreground),t.fontSize&&(i.fontSize=t.fontSize),(t.background||t.foreground)&&(c["&"]=i),t.fontFamily&&(c["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(c[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(c[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(c[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(c[".cm-content"]={caretColor:t.caret},c[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var g={};t.gutterActiveForeground&&(g.color=t.gutterActiveForeground),t.lineHighlight&&(c[".cm-activeLine"]={backgroundColor:t.lineHighlight},g.backgroundColor=t.lineHighlight),c[".cm-activeLineGutter"]=g,t.selection&&(c["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(c["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var u=O.EditorView.theme(c,{dark:o==="dark"}),k=T.HighlightStyle.define(a),h=[u,T.syntaxHighlighting(k)];return h},J={background:"#2e3440",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#00000073",selectionMatch:"#00000073",gutterBackground:"#2e3440",gutterForeground:"#4c566a",gutterActiveForeground:"#d8dee9",lineHighlight:"#4c566a29"},Q=[{tag:e.tags.keyword,color:"#5e81ac"},{tag:[e.tags.name,e.tags.deleted,e.tags.character,e.tags.propertyName,e.tags.macroName],color:"#88c0d0"},{tag:[e.tags.variableName],color:"#8fbcbb"},{tag:[e.tags.function(e.tags.variableName)],color:"#8fbcbb"},{tag:[e.tags.labelName],color:"#81a1c1"},{tag:[e.tags.color,e.tags.constant(e.tags.name),e.tags.standard(e.tags.name)],color:"#5e81ac"},{tag:[e.tags.definition(e.tags.name),e.tags.separator],color:"#a3be8c"},{tag:[e.tags.brace],color:"#8fbcbb"},{tag:[e.tags.annotation],color:"#d30102"},{tag:[e.tags.number,e.tags.changed,e.tags.annotation,e.tags.modifier,e.tags.self,e.tags.namespace],color:"#b48ead"},{tag:[e.tags.typeName,e.tags.className],color:"#ebcb8b"},{tag:[e.tags.operator,e.tags.operatorKeyword],color:"#a3be8c"},{tag:[e.tags.tagName],color:"#b48ead"},{tag:[e.tags.squareBracket],color:"#bf616a"},{tag:[e.tags.angleBracket],color:"#d08770"},{tag:[e.tags.attributeName],color:"#ebcb8b"},{tag:[e.tags.regexp],color:"#5e81ac"},{tag:[e.tags.quote],color:"#b48ead"},{tag:[e.tags.string],color:"#a3be8c"},{tag:e.tags.link,color:"#a3be8c",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[e.tags.url,e.tags.escape,e.tags.special(e.tags.string)],color:"#8fbcbb"},{tag:[e.tags.meta],color:"#88c0d0"},{tag:[e.tags.monospace],color:"#d8dee9",fontStyle:"italic"},{tag:[e.tags.comment],color:"#4c566a",fontStyle:"italic"},{tag:e.tags.strong,fontWeight:"bold",color:"#5e81ac"},{tag:e.tags.emphasis,fontStyle:"italic",color:"#5e81ac"},{tag:e.tags.strikethrough,textDecoration:"line-through"},{tag:e.tags.heading,fontWeight:"bold",color:"#5e81ac"},{tag:e.tags.special(e.tags.heading1),fontWeight:"bold",color:"#5e81ac"},{tag:e.tags.heading1,fontWeight:"bold",color:"#5e81ac"},{tag:[e.tags.heading2,e.tags.heading3,e.tags.heading4],fontWeight:"bold",color:"#5e81ac"},{tag:[e.tags.heading5,e.tags.heading6],color:"#5e81ac"},{tag:[e.tags.atom,e.tags.bool,e.tags.special(e.tags.variableName)],color:"#d08770"},{tag:[e.tags.processingInstruction,e.tags.inserted],color:"#8fbcbb"},{tag:[e.tags.contentSeparator],color:"#ebcb8b"},{tag:e.tags.invalid,color:"#434c5e",borderBottom:"1px dotted #d30102"}],X=r=>{var{theme:o="dark",settings:t={},styles:a=[]}={};return K({theme:o,settings:x({},J,t),styles:[...Q,...a]})},Y=X();V({dark:{extension:Y,colors:{accentColor:"#5e81ac",syntaxMarker:"#8fbcbb"}}});
